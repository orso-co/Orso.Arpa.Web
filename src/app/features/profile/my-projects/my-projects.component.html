<div class='p-grid p-jc-center'>
  <h1>{{ 'MY_PROJECTS' | translate }}</h1>
</div>
<p-message
  *ngIf="!myProjects || myProjects.length === 0"
  severity="info"
  text="{{ 'profile.NO_PROJECTS' | translate }}"
  styleClass="mr-2"
></p-message>
<p-accordion>
  <p-accordionTab *ngFor="let myProject of myProjects">
    <ng-template pTemplate="header">
      <div class="p-d-flex p-flex-column">
        <div class="p-as-start p-d-flex p-ai-center">
          <span class="project-title">{{ myProject.project.title }}</span>

        </div>
        <div class="p-as-start project-date">
          <span *ngIf="myProject.project.startDate">{{ myProject.project.startDate | date: 'dd.MM.yy':'locale(de)' }}</span>
          <span *ngIf="myProject.project.endDate"> - {{ myProject.project.endDate | date: 'dd.MM.yy':'locale(de)' }}</span>
        </div>

      </div>
      <div class="p-grid" *ngFor="let participation of myProject.participations">
        <p-tag
          *ngIf="participation.participationStatusInternal"
          severity="warning"
          [value]="participation.participationStatusInternal.name!"
          [rounded]="false"
        ></p-tag>
      </div>
    </ng-template>

    <ng-template pTemplate="content">
      <div class="p-fluid p-mt-1 p-formgrid p-grid comparison-container">
        <div class="p-col-3 content-item" *ngIf="myProject.project.type?.name">

          <label>{{'my-projects.GENRE' | translate}}</label>
          <span>{{ myProject.project.genre?.name || '' }}</span>
        </div>
        <div class="p-col-3 content-item" *ngIf="myProject.project.genre?.name">

          <label>{{'my-projects.TYPE' | translate}}</label>
          <span>{{ myProject.project.type?.name || '' }}</span>
        </div>
        <div class="p-col-3 content-item" *ngIf="myProject.project.state?.name">
          <label>{{ 'my-projects.STATUS' | translate }}</label>
          <span>{{ myProject.project.state?.name }}</span>
        </div>
      </div>

      <div class="p-grid p-formgrid general-container">
        <div class="p-col-8 p-mt-1 content-item">
          <label>{{ 'my-projects.DESCRIPTION' | translate }}</label>
          <span>{{ myProject.project.description }}</span>
        </div>
        <div class="p-col-4 content-item" *ngIf="(myProject.project.urls?.length || 0) > 0">
          <label>{{ 'my-projects.URLS' | translate }}</label>
          <ul>
            <li *ngFor="let url of myProject.project.urls">
              <a [href]="url.href" target="_blank">{{ url.anchorText }}</a>
            </li>
          </ul>
        </div>
      </div>
<hr>
      <div class="p-fluid p-mt-1 p-formgrid p-grid general-container">
        <div class="p-col-12" *ngFor="let participation of myProject.participations">

          <div class="p-fluid p-mt-3 p-formgrid p-grid comparison-container">

          <div class="p-col-6 status-item" *ngIf="participation.participationStatusInner?.name">
            <label>{{ 'my-projects.APPLICATIONSTATUS' | translate }}</label>
            <span>{{ participation.participationStatusInner?.name }}</span>
          </div>
          <div class="p-col-6 status-item" *ngIf="participation.participationStatusInternal?.name">
            <label>{{ 'my-projects.RESPONSE_STATUS' | translate }}</label>
            <span>{{ participation.participationStatusInternal?.name }}</span>
          </div>
            <div class="p-col-6 p-mt-2 content-item" *ngIf="participation.commentByPerformerInner">
              <label>{{ 'my-projects.MY_COMMENT' | translate }}</label>
              <span>{{ participation.commentByPerformerInner }}</span>
            </div>
            <div class="p-col-6 p-mt-2 content-item" *ngIf="participation.commentByStaffInner">
              <label>{{ 'my-projects.COMMENT_STAFF' | translate }}</label>
              <span>{{ participation.commentByPerformerInner }}</span>
            </div>
            <div class="p-col-6 p-mt-2 content-item">
              <label>{{ 'my-projects.MY_PROFILE' | translate }}</label>
              <span> {{ participation.musicianProfile?.instrumentName }} ({{ participation.musicianProfile?.qualification }})</span>
            </div>

          </div>
          <div class="p-col-12 p-text-left">
            <p-button type="button"  label="{{ 'my-projects.CHANGE_APPLICATION' | translate }}" (click)="openDialog(myProject.project.id, participation)"></p-button>

          </div>
        </div>
      </div>

    </ng-template>
  </p-accordionTab>
</p-accordion>
