<div class='p-grid p-jc-center'>
  <h1>{{ 'MY_PROJECTS' | translate }}</h1>
</div>
<p-message
  *ngIf="!myProjects || myProjects.length === 0"
  severity="info"
  text="{{ 'profile.NO_PROJECTS' | translate }}"
  styleClass="mr-2"
></p-message>
<p-accordion>
  <p-accordionTab *ngFor="let myProject of myProjects">
    <ng-template pTemplate="header">
      <div class="p-d-flex p-flex-column">
        <div class="p-as-start p-d-flex p-ai-center">
          <span class="project-title">{{ myProject.project.title }}</span>
        </div>
        <div class="p-as-start project-date">
          <span *ngIf="myProject.project.startDate">{{ myProject.project.startDate | date: 'dd.MM.yy':'locale(de)' }}</span>
          <span *ngIf="myProject.project.endDate"> - {{ myProject.project.endDate | date: 'dd.MM.yy':'locale(de)' }}</span>
        </div>

      </div>
      <p-tag
      *ngIf="myProject.project.genre"
      styleClass="p-ml-2"
      severity="info"
      [value]="myProject.project.genre.name!"
      [rounded]="true"
    ></p-tag>
    </ng-template>
    <ng-template pTemplate="content">
      <p-tabView [scrollable]="true">

        <p-tabPanel header="{{ 'my-projects.MY_APPLICATION' | translate }}" *ngIf="myProject.participations.length > 0">
          <div class="p-grid" *ngFor="let participation of myProject.participations">
            <div class="p-col-6 content-item">
              <label>{{ 'my-projects.MY_PROFILE' | translate }}</label>
              <span> {{ participation.musicianProfile?.instrumentName }} ({{ participation.musicianProfile?.qualification }})</span>
            </div>
            <div class="p-col-6 p-text-right">
              <p-button type="button" label="{{ 'my-projects.CHANGE_APPLICATION' | translate }}" (click)="openDialog(myProject.project.id, participation)"></p-button>
            </div>
            <div class="p-col-12 content-item" *ngIf="participation.participationStatusInner?.name">
              <label>{{ 'my-projects.APPLICATIONSTATUS' | translate }}</label>
              <span>{{ participation.participationStatusInner?.name }}</span>
            </div>

            <div class="p-col-12 content-item" *ngIf="participation.commentByPerformerInner">
              <label>{{ 'my-projects.MY_COMMENT' | translate }}</label>
              <span>{{ participation.commentByPerformerInner }}</span>
            </div>
          </div>
        </p-tabPanel>

        <p-tabPanel header="{{ 'my-projects.RESPONSE_STAFF' | translate }}" *ngIf="myProject.participations.length > 0">
          <div class="p-grid" *ngFor="let participation of myProject.participations">
            <div class="p-col-12 content-item">
              <label>{{ 'my-projects.RESPONSE_STAFF_PROFILE' | translate }}</label>
              <span> {{ participation.musicianProfile?.instrumentName }} ({{ participation.musicianProfile?.qualification }})</span>
            </div>
            <div class="p-col-12 content-item" *ngIf="participation.participationStatusInternal?.name">
              <label>{{ 'my-projects.RESPONSE_STATUS' | translate }}</label>
              <span>{{ participation.participationStatusInternal?.name }}</span>
            </div>
            <div class="p-col-12 content-item" *ngIf="participation.commentByStaffInner">
              <label>{{ 'my-projects.COMMENT_STAFF' | translate }}</label>
              <span>{{ participation.commentByStaffInner }}</span>
            </div>
          </div>
        </p-tabPanel>

        <p-tabPanel header="{{ 'my-projects.PROJECTDETAILS' | translate }}">
          <div class="p-grid">
            <div class="p-col-12 content-item">
              <label>{{ 'my-projects.DESCRIPTION' | translate }}</label>
              <span>{{ myProject.project.description }}</span>
            </div>
            <div class="p-col-6 content-item" *ngIf="myProject.project.type?.name">
              <label>Typ</label>
              <span>{{ myProject.project.type?.name || '' }}</span>
            </div>
            <div class="p-col-6 content-item" *ngIf="myProject.project.state?.name">
              <label>{{ 'my-projects.STATUS' | translate }}</label>
              <span>{{ myProject.project.state?.name }}</span>
            </div>
            <div class="p-col-12 content-item" *ngIf="(myProject.project.urls?.length || 0) > 0">
              <label>{{ 'my-projects.URLS' | translate }}</label>
              <ul>
                <li *ngFor="let url of myProject.project.urls">
                  <a [href]="url.href" target="_blank">{{ url.anchorText }}</a>
                </li>
              </ul>
            </div>
          </div>
        </p-tabPanel>

      </p-tabView>
    </ng-template>
  </p-accordionTab>
</p-accordion>
