<h1>{{ 'PROFILE' | translate }}</h1>
<div class='p-grid profile'>
  <div class='p-col-12 p-lg-6 p-lg-5'>
    <div class='p-grid'>
      <div class='p-col-12 p-lg-4' style='text-align: center'>
        <arpa-avatar [image]='false' [user]='(person | async) || {}' size='xlarge'></arpa-avatar>
      </div>
      <div class='p-col-12 p-lg-8 details'>
        <div>
          <div class='name'>
            <a (click)='openPersonDetail(personId)'> {{ getName(person | async) }}</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class='p-col-12 p-md-6 p-lg-7'></div>
</div>
<div class='profiles'>
  <arpa-graph-ql-feed #feedSource [contentTemplate]='feed' [query]='query' [variables]='{personId}'>
    <ng-template #feed let-feed>
      <ul>
        <button
          [routerLink]="[ '/arpa', 'persons', {outlets:  {modal: ['detail', personId] } }]"
          class='p-button-rounded p-button-text'
          icon='pi pi-user'
          label="{{ 'GO_TO_PERSON' | translate }}"
          pButton
          type='button'
        ></button>
        <ng-container *ngFor='let profile of $any((feed.values | async) || []); let i = index'>
          <li *ngIf='activeIndex === i'>
            <div class='profile'>
              <div class='p-grid'>
                <div class='p-col-12 section-detail'>
                  <header>
                    <h2>{{ profile.instrument.name }}</h2>
                    <button
                      [queryParams]='{ comboInstruments: true }'
                      [routerLink]='[{ outlets: { modal: [personId, profile.id] } }]'
                      class='p-button-rounded p-button-text'
                      icon='pi pi-pencil'
                      label="{{ 'EDIT' | translate }}"
                      pButton
                      type='button'
                    ></button>
                  </header>
                  <label>{{ 'musician-profile-dialog.LEVEL_ASSESSMENT_PERFORMER' | translate }}</label>
                  <p-rating
                    [(ngModel)]='profile.levelAssessmentInner'
                    [cancel]='false'
                    [disabled]='true'
                    pTooltip="{{ 'musician-profile-dialog.LEVEL_ASSESSMENT_PERFORMER' | translate }}"
                  ></p-rating>

                  <label>{{ 'musician-profile-dialog.LEVEL_ASSESSMENT_TEAM' | translate }}</label>
                  <p-rating
                    [(ngModel)]='profile.levelAssessmentTeam'
                    [cancel]='false'
                    [disabled]='true'
                    pTooltip="{{ 'musician-profile-dialog.LEVEL_ASSESSMENT_TEAM' | translate }}"
                  ></p-rating>

                  <p-badge
                    *ngIf='profile.isMainProfile'
                    [value]="'MAIN_PROFILE' | translate"
                  ></p-badge>

                  <p-badge
                    *ngIf='profile.deactivation'
                    severity='danger'
                    value="{{ 'musician-profile-dialog.DEACTIVATED' | translate }}"
                  ></p-badge>

                  <div style='text-align: right'>
                    <p-button
                      (click)='openInvitationDialog(profile.id)'
                      *ngIf='!profile.deactivation'
                      [label]="'INVITE' | translate"
                      class='p-text-right p-ml-3'
                      icon='pi pi-plus-circle'
                      styleClass='p-button-sm'
                      type='button'
                    ></p-button>
                  </div>
                </div>
              </div>
            </div>

          </li>

        </ng-container>
      </ul>
    </ng-template>
  </arpa-graph-ql-feed>
  <p-steps [activeIndex]='activeIndex' [model]='(profileNav | async) || []' [readonly]='false'
           styleClass='dot-profile'></p-steps>
</div>
<router-outlet name='modal'></router-outlet>
<arpa-mupro-details></arpa-mupro-details>
